<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RobCo Industries Termlink - Omni-Database v8.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        :root {
            --term-green: #33ff33;
            --term-dim: #1a4d1a;
            --term-bg: #050505;
            --term-amber: #ffb000;
            --term-red: #ff3333;
            --term-blue: #33bbff;
        }

        body {
            background-color: var(--term-bg);
            color: var(--term-green);
            font-family: 'VT323', monospace;
            overflow: hidden;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* CRT Effects */
        .crt-overlay {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 50;
        }

        .scanline {
            width: 100%;
            height: 6px;
            background: rgba(51, 255, 51, 0.08);
            position: fixed;
            z-index: 51;
            animation: scanline 4s linear infinite;
            pointer-events: none;
        }

        @keyframes scanline {
            0% { top: -10%; }
            100% { top: 110%; }
        }

        /* Boot Screen */
        #boot-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .pip-btn {
            background: #001100;
            border: 1px solid var(--term-green);
            color: var(--term-green);
            text-transform: uppercase;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .pip-btn:hover {
            background: var(--term-green);
            color: #000;
            box-shadow: 0 0 15px var(--term-green);
        }
        .pip-btn.active {
            background: var(--term-green);
            color: #000;
            font-weight: bold;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
        }

        .content-box {
            border: 1px solid var(--term-green);
            background: rgba(0, 15, 0, 0.9);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.1);
        }
        
        .holo-img {
            filter: grayscale(100%) sepia(100%) hue-rotate(50deg) saturate(300%) contrast(1.1) brightness(0.8);
            border: 2px solid var(--term-green);
            image-rendering: pixelated;
            transition: 0.3s;
        }
        .holo-img:hover {
            filter: none;
            border-color: #fff;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(100%, 280px), 1fr));
            gap: 1.5rem;
        }

        .data-card {
            border: 1px solid var(--term-green);
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(0,20,0,0.5);
        }
        .data-card:hover {
            background: var(--term-green);
            color: black;
            transform: translateY(-5px);
        }

        .theme-tech .pip-btn.active { background: var(--term-amber); border-color: var(--term-amber); color: black; }
        .theme-tech { --term-green: var(--term-amber); }
        .theme-vaults .pip-btn.active { background: var(--term-blue); border-color: var(--term-blue); color: black; }
        .theme-vaults { --term-green: var(--term-blue); }
        .theme-history .pip-btn.active { background: #ffcc00; border-color: #ffcc00; color: black; }
        .theme-history { --term-green: #ffcc00; }

        /* Scrollbar - WebKit */
        ::-webkit-scrollbar { width: 12px; }
        ::-webkit-scrollbar-track { background: #000; border-left: 1px solid var(--term-green); }
        ::-webkit-scrollbar-thumb { background: var(--term-green); }

        /* Scrollbar - Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--term-green) #000;
        }

        .archive-tag {
            font-size: 0.7rem;
            background: rgba(0,0,0,0.5);
            padding: 2px 6px;
            border: 1px solid currentColor;
            margin-right: 5px;
            display: inline-block;
        }

        .spec-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(100, 100, 100, 0.3);
        }
        .spec-row:last-child {
            border-bottom: none;
        }

        .items-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>
    <div class="scanline"></div>

    <!-- BOOT SCREEN -->
    <div id="boot-screen">
        <div class="mb-8 text-center space-y-2">
            <p>ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL</p>
            <p>COPYRIGHT 2075-2077 ROBCO INDUSTRIES</p>
            <p>-SERVER 6-</p>
        </div>
        
        <div id="lang-select" class="flex flex-col sm:flex-row gap-4">
            <button onclick="app.selectLang('pl')" class="pip-btn px-8 py-4 text-xl sm:text-2xl">POLSKI</button>
            <button onclick="app.selectLang('en')" class="pip-btn px-8 py-4 text-xl sm:text-2xl">ENGLISH</button>
        </div>

        <div id="start-btn-container" class="hidden mt-8 text-center">
            <p class="mb-4 text-amber-400 animate-pulse">SYSTEM INITIALIZED</p>
            <button onclick="app.enterSystem()" class="pip-btn px-12 py-4 text-3xl font-bold border-2 border-amber-400 text-amber-400 hover:bg-amber-400 hover:text-black">
                > INITIALIZE
            </button>
        </div>
    </div>

    <!-- MAIN INTERFACE (Hidden initially) -->
    <div class="relative z-10 h-full flex flex-col max-w-[1920px] mx-auto p-2 md:p-4 border-x-8 border-[#33ff33] bg-[#020202] transition-colors duration-500 hidden" id="main-interface">
        
        <header class="flex justify-between items-end border-b-4 border-[#33ff33] pb-4 mb-4 bg-[#001500] p-4 transition-colors duration-500" id="header-container">
            <div class="flex items-center gap-6">
                <div class="w-16 h-16 md:w-24 md:h-24 border-2 border-[#33ff33] rounded-full flex items-center justify-center bg-black relative animate-[pulse_4s_infinite]" id="logo-container">
                    <span class="text-3xl md:text-5xl flex items-center justify-center">
                        <svg viewBox="-3 -3 6 6" class="w-[1em] h-[1em] fill-current" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <defs>
                                <mask id="rad-mask" maskUnits="userSpaceOnUse" x="-3" y="-3" width="6" height="6">
                                    <circle r="1.625" fill="none" stroke="white" stroke-width="1.75"/>
                                </mask>
                            </defs>
                            <circle r=".5" fill="currentColor"/>
                            <g mask="url(#rad-mask)" fill="currentColor">
                                <g id="rad-blade">
                                    <path id="rad-blade-part" transform="rotate(30)" d="m0 0v2.88h3"/>
                                    <use transform="scale(-1,1)" xlink:href="#rad-blade-part"/>
                                </g>
                                <use transform="rotate(120)" xlink:href="#rad-blade"/>
                                <use transform="rotate(240)" xlink:href="#rad-blade"/>
                            </g>
                        </svg>
                    </span>
                </div>
                <div>
                    <h1 class="text-3xl md:text-4xl lg:text-6xl font-bold tracking-widest uppercase" style="text-shadow: 2px 2px 0px rgba(0,0,0,0.5);" id="header-title">PIP-BOY 3000</h1>
                    <div class="flex items-center gap-4 text-xl opacity-90 mt-1">
                        <span class="bg-[#33ff33] text-black px-2 font-bold" id="model-badge">MK VII</span>
                        <span id="header-subtitle">OMNI-DATABASE</span>
                    </div>
                </div>
            </div>
            <div class="text-right hidden md:block font-mono text-xs lg:text-lg opacity-80" id="header-info">
                <!-- Injected via JS -->
            </div>
        </header>

        <nav class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-2 mb-4 md:mb-6 text-sm sm:text-base lg:text-xl font-bold tracking-wider overflow-x-auto" id="nav-container">
            <!-- Buttons injected via JS -->
        </nav>

        <main id="main-content" class="flex-grow overflow-y-auto px-2 md:px-0 md:pr-4 pb-10 text-base md:text-lg lg:text-xl leading-relaxed custom-scrollbar relative">
            <!-- Content injected via JS -->
        </main>

        <footer class="mt-2 border-t-4 border-[#33ff33] bg-[#001100] p-2 md:p-3 flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4 font-bold uppercase transition-colors duration-500" id="footer-container">
            <div class="flex gap-4 md:gap-8 text-xs md:text-sm">
                <span class="border border-current px-2 py-1">HP: 100%</span>
                <span class="border border-current px-2 py-1">RADS: 0</span>
            </div>
            <div class="text-xs opacity-60 tracking-[0.2em] text-center sm:text-right" id="footer-text">
                ROBCO INDUSTRIES © 2077
            </div>
        </footer>
    </div>

    <script>
        const app = {
            currentLang: null,
            db: {},
            currentTab: 'status',

            // 1. Language Selection
            selectLang: function(lang) {
                this.currentLang = lang;
                document.getElementById('lang-select').classList.add('hidden');
                document.getElementById('start-btn-container').classList.remove('hidden');
            },

            // 2. Load Data & Start
            enterSystem: async function() {
                console.log('[SYSTEM] Initializing...');
                const filename = `database-${this.currentLang}.json`;

                // Show loading indicator
                const bootScreen = document.getElementById('boot-screen');
                const startBtn = document.getElementById('start-btn-container');
                startBtn.innerHTML = '<p class="text-amber-400 animate-pulse text-xl">LOADING DATABASE...</p>';

                try {
                    console.log(`[SYSTEM] Fetching ${filename}...`);
                    const response = await fetch(filename);
                    console.log('[SYSTEM] Fetch complete, status:', response.status);

                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                    console.log('[SYSTEM] Parsing JSON...');
                    this.db = await response.json();
                    console.log('[SYSTEM] Database loaded successfully:', Object.keys(this.db));

                    console.log('[SYSTEM] Hiding boot screen...');
                    bootScreen.classList.add('hidden');
                    document.getElementById('main-interface').classList.remove('hidden');

                    console.log('[SYSTEM] Initializing UI...');
                    this.initUI();

                    console.log('[SYSTEM] Changing to status tab...');
                    this.changeTab('status');

                    console.log('[SYSTEM] Starting clock...');
                    setInterval(this.updateClock, 1000);
                    this.updateClock();

                    console.log('[SYSTEM] Initialization complete!');

                } catch (e) {
                    console.error("[SYSTEM] Critical Failure:", e);
                    console.error("[SYSTEM] Error stack:", e.stack);

                    // Show error on screen
                    const isFileProtocol = window.location.protocol === 'file:';
                    const errorMsg = isFileProtocol
                        ? `CRITICAL ERROR: FILE PROTOCOL DETECTED\n\nYou are opening this file directly in your browser.\nThis blocks database loading for security reasons.\n\nSOLUTION:\n1. Use VS Code Live Server extension, OR\n2. Run: python -m http.server 8000\n3. Then open: http://localhost:8000`
                        : `CRITICAL ERROR: COULD NOT LOAD ${filename}\n\nError: ${e.message}\n\nCheck browser console for details.`;

                    startBtn.innerHTML = `
                        <div class="border-2 border-red-500 bg-black p-6 text-red-500 text-left max-w-2xl">
                            <h3 class="text-2xl font-bold mb-4 text-center">⚠ SYSTEM FAILURE ⚠</h3>
                            <pre class="text-sm whitespace-pre-wrap font-mono">${errorMsg}</pre>
                            <button onclick="location.reload()" class="pip-btn px-6 py-2 mt-4 w-full border-red-500 text-red-500 hover:bg-red-500">
                                > RESTART SYSTEM
                            </button>
                        </div>
                    `;
                }
            },

            // 3. Initialize Static UI Text
            initUI: function() {
                const ui = this.db.ui;
                document.getElementById('header-subtitle').innerText = ui.title;
                document.getElementById('footer-text').innerText = ui.footer;
                
                // Build Nav Buttons
                const nav = document.getElementById('nav-container');
                nav.innerHTML = '';
                Object.keys(ui.nav).forEach(key => {
                    let classes = "pip-btn py-3";
                    // Specific styling for keys
                    if (key === 'tech') classes += " text-amber-300 border-amber-300";
                    if (key === 'vaults') classes += " text-blue-400 border-blue-400";
                    if (key === 'timeline') classes += " text-yellow-400 border-yellow-400";
                    
                    nav.innerHTML += `<button onclick="app.changeTab('${key}')" id="btn-${key}" class="${classes}">${ui.nav[key]}</button>`;
                });
            },

            // 4. Tab Switching Logic
            changeTab: function(tabName) {
                this.currentTab = tabName;
                document.querySelectorAll('.pip-btn').forEach(btn => btn.classList.remove('active'));
                const btn = document.getElementById(`btn-${tabName}`);
                if(btn) btn.classList.add('active');

                // Update Header Info
                const ui = this.db.ui;
                const accessText = this.currentLang === 'pl' ? 'DOSTĘP' : 'ACCESS';
                const timeText = this.currentLang === 'pl' ? 'CZAS' : 'TIME';
                
                document.getElementById('header-info').innerHTML = `
                    <p>${ui.access}</p>
                    <p>${ui.module}: <span class="font-bold text-amber-400">${tabName.toUpperCase()}</span></p>
                    <p>${timeText}: <span id="clock">00:00:00</span></p>
                `;

                // Theme
                const theme = this.db[tabName]?.theme || '';
                document.getElementById('main-interface').className = `relative z-10 h-full flex flex-col max-w-[1920px] mx-auto p-2 md:p-4 border-x-8 bg-[#020202] transition-colors duration-500 ${theme}`;

                // Render
                const main = document.getElementById('main-content');
                main.style.opacity = '0';
                setTimeout(() => {
                    if (tabName === 'status') this.renderStatus();
                    else if (this.db[tabName]) this.renderCategoryView(tabName);
                    main.style.opacity = '1';
                }, 150);
            },

            updateClock: function() {
                const clock = document.getElementById('clock');
                if(clock) clock.innerText = new Date().toLocaleTimeString(app.currentLang === 'pl' ? 'pl-PL' : 'en-US');
            },

            // --- RENDERERS ---
            renderStatus: function() {
                const ui = this.db.ui;
                document.getElementById('main-content').innerHTML = `
                    <div class="h-full flex flex-col justify-center items-center text-center animate-[fadeIn_0.5s]">
                        <div class="content-box p-10 border-4 border-[#33ff33]">
                            <h2 class="text-5xl font-bold mb-4">${ui.status_msg}</h2>
                            <p class="text-xl mb-6">${ui.status_sub}</p>
                            <!-- GRAPHIC PLACEHOLDER: MAIN_LOGO_PNG -->
                            <div class="w-32 h-32 mx-auto border border-dashed border-[#33ff33] flex items-center justify-center opacity-50">
                                [LOGO.PNG]
                            </div>
                        </div>
                    </div>`;
            },

            renderCategoryView: function(tabKey) {
                const data = this.db[tabKey];
                const main = document.getElementById('main-content');
                const titleClass = data.color;
                const borderClass = data.border;

                main.innerHTML = `
                    <div class="content-box ${borderClass} bg-opacity-50">
                        <h2 class="text-4xl mb-4 font-bold ${titleClass} border-b ${borderClass} pb-2">${data.title}</h2>
                        <div class="data-grid">
                            ${data.categories.map(cat => `
                                <div onclick="app.renderItemsView('${tabKey}', '${cat.id}')" class="data-card group ${borderClass} ${titleClass} hover:bg-white/10">
                                    <div class="text-6xl mb-2 group-hover:scale-110 transition">${cat.icon}</div>
                                    <h3 class="text-2xl font-bold mb-2">${cat.name}</h3>
                                    <p class="text-sm opacity-80 text-gray-300">${cat.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
            },

            renderItemsView: function(tabKey, catId) {
                const data = this.db[tabKey];
                const cat = data.categories.find(c => c.id === catId);
                const items = data.items[catId] || [];
                const main = document.getElementById('main-content');
                const titleClass = data.color;
                const borderClass = data.border;
                const backBtnText = this.currentLang === 'pl' ? '<< KATEGORIE' : '<< CATEGORIES';

                main.innerHTML = `
                    <div class="content-box ${borderClass}">
                        <div class="flex justify-between items-center mb-6 border-b ${borderClass} pb-2">
                            <button onclick="app.renderCategoryView('${tabKey}')" class="pip-btn px-4 py-1 text-sm ${borderClass} ${titleClass} hover:bg-white/20">${backBtnText}</button>
                            <h2 class="text-3xl font-bold ${titleClass}">${cat.name}</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${items.map(item => `
                                <div onclick="app.renderDetailView('${tabKey}', '${catId}', '${item.id}')" class="data-card items-card p-4 ${borderClass} hover:bg-white/10 group">
                                    <img src="${item.img}" class="w-24 h-20 md:w-32 md:h-24 object-cover border ${borderClass} group-hover:border-white flex-shrink-0">
                                    <div class="min-w-0">
                                        <h3 class="text-lg md:text-xl font-bold ${titleClass} mb-1 group-hover:text-white truncate">${item.name}</h3>
                                        <div class="flex flex-wrap gap-1 md:gap-2">
                                            ${Object.keys(item.specs).slice(0,2).map(key => `<span class="archive-tag">${key}: ${item.specs[key]}</span>`).join('')}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
            },

            renderDetailView: function(tabKey, catId, itemId) {
                const data = this.db[tabKey];
                const items = data.items[catId];
                const item = items.find(i => i.id === itemId);
                const main = document.getElementById('main-content');
                const titleClass = data.color;
                const borderClass = data.border;
                const backBtnText = this.currentLang === 'pl' ? '<< LISTA' : '<< LIST';
                const specsText = this.currentLang === 'pl' ? 'SPECYFIKACJA' : 'SPECS';
                const loreText = this.currentLang === 'pl' ? 'ARCHIWUM (LORE)' : 'ARCHIVE (LORE)';
                const dataText = this.currentLang === 'pl' ? 'DANE SZCZEGÓŁOWE' : 'DETAILED DATA';

                let specsHtml = Object.entries(item.specs).map(([key, val]) => `
                    <div class="spec-row border-gray-600">
                        <span class="font-bold ${titleClass}">${key}:</span>
                        <span class="text-right text-gray-300">${val}</span>
                    </div>`).join('');

                main.innerHTML = `
                    <div class="content-box border-2 ${borderClass} bg-[#000900]">
                        <div class="flex justify-between items-center mb-4 border-b ${borderClass} pb-2">
                            <button onclick="app.renderItemsView('${tabKey}', '${catId}')" class="pip-btn px-4 py-1 text-sm ${borderClass} ${titleClass} hover:bg-white/20">${backBtnText}</button>
                            <span class="archive-tag text-lg ${titleClass} border-gray-600">${dataText}</span>
                        </div>
                        <div class="grid lg:grid-cols-2 gap-8">
                            <div>
                                <img src="${item.img}" class="w-full h-auto border-2 ${borderClass} holo-img mb-4">
                                <h2 class="text-4xl font-bold ${titleClass} mb-2">${item.name}</h2>
                            </div>
                            <div class="space-y-6">
                                <div class="bg-black/50 p-4 border ${borderClass}">
                                    <h3 class="text-xl font-bold mb-2 border-b ${borderClass} ${titleClass}">${specsText}</h3>
                                    ${specsHtml}
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-2 ${titleClass}">${loreText}</h3>
                                    <p class="text-justify leading-relaxed text-lg text-gray-300">${item.lore}</p>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }
        };
    </script>
</body>
</html>